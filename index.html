<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ultimate AI Game Hub - Firebase</title>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-check-compat.js"></script>

<!-- reCAPTCHA v3 -->
<script src="https://www.google.com/recaptcha/enterprise.js?render=6LdbxMwrAAAAANzmgIgX76g2OW7X7qQSDKgkCbLZ"></script>

<style>
body { font-family: Arial, sans-serif; background:#1e1e1e; color:#fff; margin:0; padding:0; }
header { background:#333; padding:20px; text-align:center; }
section { padding:20px; }
h2 { color:#f0f0f0; text-align:center; }
input, button { padding:10px; margin:5px 0; border-radius:5px; border:none; cursor:pointer; }
#auth-messages { margin-bottom:10px; color:#ffcc00; }
#protectedContent { display:none; }
iframe { width:300px; height:200px; border:none; border-radius:5px; }
#tyreeseMessages { height:250px; overflow-y:auto; background: rgba(0,0,0,0.2); padding:15px; border-radius:10px; font-style:italic; }
.provider-btn { background:#4a90e2; color:white; margin-top:5px; }
.github-btn { background:#333; }
</style>

<script>
  // ---------------- Firebase Config ----------------
  const firebaseConfig = {
    apiKey: "AIzaSyCFQmadEV0ekDEmF23sUu2ZPkpUzbpD7kY",
    authDomain: "yodude-44fdb.firebaseapp.com",
    projectId: "yodude-44fdb",
    storageBucket: "yodude-44fdb.appspot.com",
    messagingSenderId: "421085612215",
    appId: "1:421085612215:web:YOUR_APP_ID_HERE"
  };
  firebase.initializeApp(firebaseConfig);

  // ---------------- App Check ----------------
  const appCheck = firebase.appCheck();
  appCheck.activate('6LdbxMwrAAAAANzmgIgX76g2OW7X7qQSDKgkCbLZ', true); // enforce mode

  const auth = firebase.auth();

  // ---------------- reCAPTCHA Token ----------------
  async function getRecaptchaToken(action) {
    return new Promise((resolve, reject) => {
      grecaptcha.enterprise.ready(async () => {
        try {
          const token = await grecaptcha.enterprise.execute('6LdbxMwrAAAAANzmgIgX76g2OW7X7qQSDKgkCbLZ', { action: action });
          resolve(token);
        } catch (err) {
          reject(err);
        }
      });
    });
  }
</script>
</head>
<body>

<header>
  <h1>🎮 Ultimate AI Game Hub</h1>
  <p>Login to access all features!</p>
</header>

<!-- Login / Signup -->
<section id="auth">
  <h2>🔑 Login / Signup</h2>
  <div id="auth-messages">🔐 Please log in or sign up</div>

  <input type="email" id="email" placeholder="Email" required/>
  <input type="password" id="password" placeholder="Password" required/>
  <button id="signupBtn">Sign Up</button>
  <button id="loginBtn">Login</button>
  <button id="logoutBtn" style="display:none;">Logout</button>

  <hr style="margin:15px 0; border-color:#555;"/>
  <button id="googleBtn" class="provider-btn">Login with Google</button>
  <button id="githubBtn" class="provider-btn github-btn">Login with GitHub</button>
</section>

<!-- Protected Content -->
<div id="protectedContent">

  <!-- Mini Crazy Games -->
  <section id="mini-crazy-games">
    <h2>🎮 Mini Crazy Games</h2>
    <div style="display:flex; flex-wrap:wrap; justify-content:center; gap:15px;">
      <iframe src="https://www.crazygames.com/embed/moto-x3m" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
      <iframe src="https://www.crazygames.com/embed/shell-shockers" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
      <iframe src="https://www.crazygames.com/embed/krunker-io" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
      <iframe src="https://www.crazygames.com/embed/happy-wheels" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
      <iframe src="https://www.crazygames.com/embed/bloxdhop-io" sandbox="allow-same-origin allow-scripts allow-forms"></iframe>
    </div>
  </section>

  <!-- AI YouTube Launcher -->
  <section id="ai-videos">
    <h2>🎬 AI YouTube Launcher</h2>
    <div id="video-container" style="display:flex; flex-wrap:wrap; justify-content:center; gap:15px;"></div>
  </section>

  <!-- Tyreese AI Assistant -->
  <section id="tyreese">
    <h2>🤘 Tyreese - Your Cool AI Assistant</h2>
    <div id="tyreeseMessages"></div>
    <form id="tyreeseForm" style="display:flex; gap:10px; margin-top:10px;">
      <input type="text" id="tyreeseInput" placeholder="Ask Tyreese..." required style="flex:1; padding:10px; border-radius:8px;"/>
      <button type="submit" style="padding:10px 20px; border-radius:8px; background:#4a32a8; color:white;">Send</button>
    </form>
  </section>

</div>

<script>
  // ---------------- DOM Elements ----------------
  const authMessages = document.getElementById("auth-messages");
  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const signupBtn = document.getElementById("signupBtn");
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const protectedContent = document.getElementById("protectedContent");

  // ---------------- Firebase Email/Password ----------------
  signupBtn.addEventListener("click", async () => {
    try {
      const token = await getRecaptchaToken('SIGNUP');
      console.log("reCAPTCHA token:", token);
      await auth.createUserWithEmailAndPassword(emailInput.value, passwordInput.value);
    } catch (error) { authMessages.textContent = "❌ Sign up error: " + error.message; }
  });

  loginBtn.addEventListener("click", async () => {
    try {
      const token = await getRecaptchaToken('LOGIN');
      console.log("reCAPTCHA token:", token);
      await auth.signInWithEmailAndPassword(emailInput.value, passwordInput.value);
    } catch (error) { authMessages.textContent = "❌ Login error: " + error.message; }
  });

  logoutBtn.addEventListener("click", async () => { await auth.signOut(); });

  // ---------------- Google Login ----------------
  googleBtn.addEventListener("click", async () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    try {
      const token = await getRecaptchaToken('GOOGLE_LOGIN');
      console.log("reCAPTCHA token:", token);
      await auth.signInWithPopup(provider);
    } catch (error) { authMessages.textContent = "❌ Google login error: " + error.message; }
  });

  // ---------------- GitHub Login ----------------
  githubBtn.addEventListener("click", async () => {
    const provider = new firebase.auth.GithubAuthProvider(); // ✅ Properly declared here
    try {
      const token = await getRecaptchaToken('GITHUB_LOGIN');
      console.log("reCAPTCHA token:", token);
      await auth.signInWithPopup(provider);
    } catch (error) { authMessages.textContent = "❌ GitHub login error: " + error.message; }
  });

  // ---------------- Auth State ----------------
  auth.onAuthStateChanged(user => {
    if(user){
      authMessages.textContent = "✅ Logged in as " + (user.email || user.displayName);
      logoutBtn.style.display = "inline-block";
      protectedContent.style.display = "block";
    } else {
      authMessages.textContent = "🔐 Please log in or sign up";
      logoutBtn.style.display = "none";
      protectedContent.style.display = "none";
    }
  });

  // ---------------- Tyreese AI ----------------
  const tyreeseForm = document.getElementById("tyreeseForm");
  const tyreeseInput = document.getElementById("tyreeseInput");
  const tyreeseMessages = document.getElementById("tyreeseMessages");

  tyreeseForm.addEventListener("submit", e => {
    e.preventDefault();
    const userMsg = tyreeseInput.value;
    const divUser = document.createElement("div");
    divUser.textContent = "You: " + userMsg;
    tyreeseMessages.appendChild(divUser);

    const divAI = document.createElement("div");
    divAI.textContent = "Tyreese: 😎 Yo! I got you – " + userMsg;
    tyreeseMessages.appendChild(divAI);

    tyreeseInput.value = "";
    tyreeseMessages.scrollTop = tyreeseMessages.scrollHeight;
  });

  // ---------------- AI Video Launcher ----------------
  const videoContainer = document.getElementById("video-container");
  const categories = ["Funny", "Anime", "Weird", "Dark", "Disney Conspiracy"];
  categories.forEach(cat => {
    const iframe = document.createElement("iframe");
    iframe.src = "https://www.youtube.com/embed?listType=search&list=" + encodeURIComponent(cat + " AI");
    videoContainer.appendChild(iframe);
  });
</script>

</body>
</html>